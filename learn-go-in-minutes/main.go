// å•è¡Œæ³¨é‡Š
/* å¤šè¡Œ
   æ³¨é‡Š */

// å¯¼å…¥åŒ…çš„å­å¥åœ¨æ¯ä¸ªæºæ–‡ä»¶çš„å¼€å¤´ã€‚
// main æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒç”¨æ¥å£°æ˜å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåº“ã€‚
package main

// Import è¯­å¥å£°æ˜äº†å½“å‰æ–‡ä»¶å¼•ç”¨çš„åŒ…ã€‚
import (
	"fmt"       // Go è¯­è¨€æ ‡å‡†åº“ä¸­çš„åŒ…
	"io/ioutil" // åŒ…å«ä¸€äº›è¾“å…¥è¾“å‡ºå‡½æ•°
	m "math"    // æ•°å­¦æ ‡å‡†åº“ï¼Œåœ¨æ­¤æ–‡ä»¶ä¸­åˆ«åä¸ºm
	"net/http"  // ä¸€ä¸ª web æœåŠ¡å™¨åŒ…
	"os"        // ç³»ç»Ÿåº•å±‚å‡½æ•°ï¼Œå¦‚æ–‡ä»¶è¯»å†™
	"strconv"   // å­—ç¬¦ä¸²è½¬æ¢
)

// å‡½æ•°å£°æ˜ï¼šmain æ˜¯ç¨‹åºæ‰§è¡Œçš„å…¥å£ã€‚
// ä¸ç®¡ä½ å–œæ¬¢è¿˜æ˜¯ä¸å–œæ¬¢ï¼Œåæ­£ Go å°±ç”¨äº†èŠ±æ‹¬å·æ¥åŒ…ä½å‡½æ•°ä½“ã€‚
func main() {
	// å¾€æ ‡å‡†è¾“å‡ºæ‰“å°ä¸€è¡Œã€‚
	// ç”¨åŒ…å fmt é™åˆ¶æ‰“å°å‡½æ•°ã€‚
	fmt.Println("ä½ å¥½ä¸–ç•Œï¼Œ2 çš„ç«‹æ–¹æ˜¯", m.Pow(2, 3))

	// è°ƒç”¨å½“å‰åŒ…çš„å¦ä¸€ä¸ªå‡½æ•°ã€‚
	beyondHello()
}

// å‡½æ•°å¯ä»¥åœ¨æ‹¬å·é‡ŒåŠ å‚æ•°ã€‚
// å¦‚æœæ²¡æœ‰å‚æ•°çš„è¯ï¼Œä¹Ÿéœ€è¦ä¸€ä¸ªç©ºæ‹¬å·ã€‚
func beyondHello() {
	var x int // å˜é‡å£°æ˜ï¼Œå˜é‡å¿…é¡»åœ¨ä½¿ç”¨ä¹‹å‰å£°æ˜ã€‚
	x = 3     // å˜é‡èµ‹å€¼ã€‚
	// å¯ä»¥ç”¨ := æ¥å·æ‡’ï¼Œå®ƒè‡ªåŠ¨æŠŠå˜é‡ç±»å‹ã€å£°æ˜å’Œèµ‹å€¼éƒ½æå®šäº†ã€‚
	y := 4
	sum, prod := learnMultiple(x, y)        // è¿”å›å¤šä¸ªå˜é‡çš„å‡½æ•°
	fmt.Println("sum:", sum, "prod:", prod) // ç®€å•è¾“å‡º
	learnTypes()                            // å°‘äºyåˆ†é’Ÿï¼Œå­¦çš„æ›´å¤šï¼
}

/*
	<- å¿«çœ‹å¿«çœ‹æˆ‘æ˜¯è·¨è¡Œæ³¨é‡Š _(:Ğ·ã€âˆ )_

Go è¯­è¨€çš„å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå‚æ•°å’Œ *å¤šä¸ª* è¿”å›å€¼ã€‚
åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ `x`ã€`y` æ˜¯å‚æ•°ï¼Œ
`sum`ã€`prod` æ˜¯è¿”å›å€¼çš„æ ‡è¯†ç¬¦ï¼ˆå¯ä»¥ç†è§£ä¸ºåå­—ï¼‰ä¸”ç±»å‹ä¸ºint
*/
func learnMultiple(x, y int) (sum, prod int) {
	return x + y, x * y // è¿”å›ä¸¤ä¸ªå€¼
}

// å†…ç½®å˜é‡ç±»å‹å’Œå…³é”®è¯
func learnTypes() {
	// çŸ­å£°æ˜ç»™ä½ æ‰€æƒ³ã€‚
	str := "å°‘è¯´è¯å¤šè¯»ä¹¦!" // String ç±»å‹

	s2 := `è¿™æ˜¯ä¸€ä¸ª
å¯ä»¥æ¢è¡Œçš„å­—ç¬¦ä¸²` // åŒæ ·æ˜¯ String ç±»å‹

	// é ascii å­—ç¬¦ã€‚Go ä½¿ç”¨ UTF-8 ç¼–ç ã€‚
	g := 'Î£' // rune ç±»å‹ï¼Œint32 çš„åˆ«åï¼Œä½¿ç”¨ UTF-8 ç¼–ç 

	f := 3.14195 // float64 ç±»å‹ï¼ŒIEEE-754 64 ä½æµ®ç‚¹æ•°
	c := 3 + 4i  // complex128 ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨ä¸¤ä¸ª float64 è¡¨ç¤º

	// var å˜é‡å¯ä»¥ç›´æ¥åˆå§‹åŒ–ã€‚
	var u uint = 7 // unsigned æ— ç¬¦å·å˜é‡ï¼Œä½†æ˜¯å®ç°ä¾èµ– int å‹å˜é‡çš„é•¿åº¦
	var pi float32 = 22. / 7

	// å­—ç¬¦è½¬æ¢
	n := byte('\n') // byte æ˜¯ uint8 çš„åˆ«å

	// æ•°ç»„ï¼ˆArrayï¼‰ç±»å‹çš„å¤§å°åœ¨ç¼–è¯‘æ—¶å³ç¡®å®š
	var a4 [4]int           // æœ‰ 4 ä¸ª int å˜é‡çš„æ•°ç»„ï¼Œåˆå§‹ä¸º0
	a3 := [...]int{3, 1, 5} // æœ‰ 3 ä¸ª int å˜é‡çš„æ•°ç»„ï¼ŒåŒæ—¶è¿›è¡Œäº†åˆå§‹åŒ–

	// Array å’Œ slice å„æœ‰æ‰€é•¿ï¼Œä½†æ˜¯ slice å¯ä»¥åŠ¨æ€çš„å¢åˆ ï¼Œæ‰€ä»¥æ›´å¤šæ—¶å€™è¿˜æ˜¯ä½¿ç”¨ sliceã€‚
	s3 := []int{4, 5, 9}    // å›å»çœ‹çœ‹ a3 ï¼Œæ˜¯ä¸æ˜¯è¿™é‡Œæ²¡æœ‰çœç•¥å·ï¼Ÿ
	s4 := make([]int, 4)    // åˆ†é… 4 ä¸ª int å¤§å°çš„å†…å­˜å¹¶åˆå§‹åŒ–ä¸º 0
	var d2 [][]float64      // è¿™é‡Œåªæ˜¯å£°æ˜ï¼Œå¹¶æœªåˆ†é…å†…å­˜ç©ºé—´
	bs := []byte("a slice") // è¿›è¡Œç±»å‹è½¬æ¢

	// åˆ‡ç‰‡ï¼ˆSliceï¼‰çš„å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œå®ƒçš„é•¿åº¦å¯ä»¥æŒ‰éœ€å¢é•¿
	// ç”¨å†…ç½®å‡½æ•° append() å‘åˆ‡ç‰‡æœ«å°¾æ·»åŠ å…ƒç´ 
	// è¦å¢æ·»åˆ°çš„ç›®æ ‡æ˜¯ append å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ
	// å¤šæ•°æ—¶å€™æ•°ç»„åœ¨åŸå†…å­˜å¤„é¡ºæ¬¡å¢é•¿ï¼Œå¦‚
	s := []int{1, 2, 3}    // è¿™æ˜¯ä¸ªé•¿åº¦ 3 çš„ slice
	s = append(s, 4, 5, 6) // å†åŠ ä»¨å…ƒç´ ï¼Œé•¿åº¦å˜ä¸º 6 äº†
	fmt.Println(s)         // æ›´æ–°åçš„æ•°ç»„æ˜¯ [1 2 3 4 5 6]

	// é™¤äº†å‘ append() æä¾›ä¸€ç»„åŸå­å…ƒç´ ï¼ˆå†™æ­»åœ¨ä»£ç é‡Œçš„ï¼‰ä»¥å¤–ï¼Œæˆ‘ä»¬
	// è¿˜å¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•ä¼ é€’ä¸€ä¸ª slice å¸¸é‡æˆ–å˜é‡ï¼Œå¹¶åœ¨åé¢åŠ ä¸Šçœç•¥å·ï¼Œ
	// ç”¨ä»¥è¡¨ç¤ºæˆ‘ä»¬å°†å¼•ç”¨ä¸€ä¸ª sliceã€è§£åŒ…å…¶ä¸­çš„å…ƒç´ å¹¶å°†å…¶æ·»åŠ åˆ° s æ•°ç»„æœ«å°¾ã€‚
	s = append(s, []int{7, 8, 9}...) // ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ª slice å¸¸é‡
	fmt.Println(s)                   // æ›´æ–°åçš„æ•°ç»„æ˜¯ [1 2 3 4 5 6 7 8 9]

	p, q := learnMemory() // å£°æ˜ p, q ä¸º int å‹å˜é‡çš„æŒ‡é’ˆ
	fmt.Println(*p, *q)   // * å–å€¼

	// Mapæ˜¯åŠ¨æ€å¯å¢é•¿å…³è”æ•°ç»„ï¼Œå’Œå…¶ä»–è¯­è¨€ä¸­çš„hashæˆ–è€…å­—å…¸ç›¸ä¼¼ã€‚
	m := map[string]int{"three": 3, "four": 4}
	m["one"] = 1

	// åœ¨Goè¯­è¨€ä¸­æœªä½¿ç”¨çš„å˜é‡åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯warningã€‚
	// ä¸‹åˆ’çº¿ _ å¯ä»¥ä½¿ä½ â€œä½¿ç”¨â€ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯ä¸¢å¼ƒå®ƒçš„å€¼ã€‚
	_, _, _, _, _, _, _, _, _, _ = str, s2, g, f, u, pi, n, a3, s4, bs
	// é€šå¸¸çš„ç”¨æ³•æ˜¯ï¼Œåœ¨è°ƒç”¨æ‹¥æœ‰å¤šä¸ªè¿”å›å€¼çš„å‡½æ•°æ—¶ï¼Œ
	// ç”¨ä¸‹åˆ’çº¿æŠ›å¼ƒå…¶ä¸­çš„ä¸€ä¸ªå‚æ•°ã€‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªè„å¥—è·¯ï¼Œ
	// è°ƒç”¨os.Createå¹¶ç”¨ä¸‹åˆ’çº¿å˜é‡æ‰”æ‰å®ƒçš„é”™è¯¯ä»£ç ã€‚
	// å› ä¸ºæˆ‘ä»¬è§‰å¾—è¿™ä¸ªæ–‡ä»¶ä¸€å®šä¼šæˆåŠŸåˆ›å»ºã€‚
	file, _ := os.Create("output.txt")
	fmt.Fprint(file, "è¿™å¥ä»£ç è¿˜ç¤ºèŒƒäº†å¦‚ä½•å†™å…¥æ–‡ä»¶å‘¢")
	file.Close()

	// è¾“å‡ºå˜é‡
	fmt.Println(s, c, a4, s3, d2, m)

	learnFlowControl() // å›åˆ°æµç¨‹æ§åˆ¶
}

// å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgoæ”¯æŒæœ‰åç§°çš„å˜é‡è¿”å›å€¼ã€‚
// å£°æ˜è¿”å›å€¼æ—¶å¸¦ä¸Šä¸€ä¸ªåå­—å…è®¸æˆ‘ä»¬åœ¨å‡½æ•°å†…çš„ä¸åŒä½ç½®
// åªç”¨å†™returnä¸€ä¸ªè¯å°±èƒ½å°†å‡½æ•°å†…æŒ‡å®šåç§°çš„å˜é‡è¿”å›
func learnNamedReturns(x, y int) (z int) {
	z = x * y
	return // éšå¼è¿”å›zï¼Œå› ä¸ºå‰é¢æŒ‡å®šäº†å®ƒã€‚
}

// Go å…¨é¢æ”¯æŒåƒåœ¾å›æ”¶ã€‚Go æœ‰æŒ‡é’ˆï¼Œä½†æ˜¯ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ã€‚
// ä½ ä¼šå› ä¸ºç©ºæŒ‡é’ˆè€ŒçŠ¯é”™ï¼Œä½†æ˜¯ä¸ä¼šå› ä¸ºå¢åŠ æŒ‡é’ˆè€ŒçŠ¯é”™ã€‚
func learnMemory() (p, q *int) {
	// è¿”å› int å‹å˜é‡æŒ‡é’ˆ p å’Œ q
	p = new(int) // å†…ç½®å‡½æ•° new åˆ†é…å†…å­˜
	// è‡ªåŠ¨å°†åˆ†é…çš„ int èµ‹å€¼ 0ï¼Œp ä¸å†æ˜¯ç©ºçš„äº†ã€‚
	s := make([]int, 20) // ç»™ 20 ä¸ª int å˜é‡åˆ†é…ä¸€å—å†…å­˜
	s[3] = 7             // èµ‹å€¼
	r := -2              // å£°æ˜å¦ä¸€ä¸ªå±€éƒ¨å˜é‡
	return &s[3], &r     // & å–åœ°å€
}

func expensiveComputation() int {
	return 1e6
}

func learnFlowControl() {
	// if éœ€è¦èŠ±æ‹¬å·ï¼Œæ‹¬å·å°±å…äº†
	if true {
		fmt.Println("è¿™å¥è¯è‚¯å®šè¢«æ‰§è¡Œ")
	}
	// ç”¨ go fmt å‘½ä»¤å¯ä»¥å¸®ä½ æ ¼å¼åŒ–ä»£ç ï¼Œæ‰€ä»¥ä¸ç”¨æ€•è¢«äººåæ§½ä»£ç é£æ ¼äº†ï¼Œ
	// ä¹Ÿä¸ç”¨å®¹å¿åˆ«äººçš„ä»£ç é£æ ¼ã€‚
	if false {
		// poutï¼ˆç”Ÿæ°”ã€æ’…å˜´ ğŸ˜ ï¼‰
	} else {
		// gloatï¼ˆçªƒå–œï¼Œå·ç¬‘ ğŸ˜ï¼‰
	}
	// å¦‚æœå¤ªå¤šåµŒå¥—çš„ if è¯­å¥ï¼Œæ¨èä½¿ç”¨ switch
	x := 1
	switch x {
	case 0:
	case 1:
		// éšå¼è°ƒç”¨ break è¯­å¥ï¼ŒåŒ¹é…ä¸Šä¸€ä¸ªå³åœæ­¢
	case 2:
		// ä¸ä¼šè¿è¡Œ
	}
	// å’Œ if ä¸€æ ·ï¼Œfor ä¹Ÿä¸ç”¨æ‹¬å·
	for x := 0; x < 3; x++ { // ++ è‡ªå¢
		fmt.Println("éå†", x)
	}
	// x åœ¨è¿™é‡Œè¿˜æ˜¯ 1ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

	// for æ˜¯ go é‡Œå”¯ä¸€çš„å¾ªç¯å…³é”®å­—ï¼Œä¸è¿‡å®ƒæœ‰å¾ˆå¤šå˜ç§
	for { // æ­»å¾ªç¯
		break    // éª—ä½ çš„
		continue // ä¸ä¼šè¿è¡Œçš„
	}

	// ç”¨ range å¯ä»¥æšä¸¾ arrayã€sliceã€stringã€mapã€channel ç­‰ä¸åŒç±»å‹
	// å¯¹äº channel æ¥è¯´ï¼Œrange ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œ
	// è€Œ arrayã€sliceã€stringã€map ç­‰å…¶ä»–ç±»å‹è¿”å›ä¸€å¯¹å„¿
	for key, value := range map[string]int{"one": 1, "two": 2, "three": 3} {
		// æ‰“å° map ä¸­çš„æ¯ä¸€ä¸ªé”®å€¼å¯¹
		fmt.Printf("ç´¢å¼•ï¼š%s, å€¼ä¸ºï¼š%d\n", key, value)
	}
	// å¦‚æœä½ åªæƒ³è¦å€¼ï¼Œé‚£å°±ç”¨å‰é¢è®²çš„ä¸‹åˆ’çº¿æ‰”æ‰æ²¡ç”¨çš„
	for _, name := range []string{"Bob", "Bill", "Joe"} {
		fmt.Printf("ä½ æ˜¯ã€‚ã€‚ %s\n", name)
	}

	// å’Œ for ä¸€æ ·ï¼Œif ä¸­çš„ := å…ˆç»™ y èµ‹å€¼ï¼Œç„¶åå†å’Œ x ä½œæ¯”è¾ƒã€‚
	if y := expensiveComputation(); y > x {
		x = y
	}
	// é—­åŒ…å‡½æ•°
	xBig := func() bool {
		return x > 100 // xæ˜¯ä¸Šé¢å£°æ˜çš„å˜é‡å¼•ç”¨
	}
	fmt.Println("xBig:", xBig()) // true ï¼ˆä¸Šé¢æŠŠ y èµ‹ç»™ x äº†ï¼‰
	x /= 1e5                     // x å˜æˆ 10
	fmt.Println("xBig:", xBig()) // ç°åœ¨æ˜¯ false

	// é™¤æ­¤ä¹‹å¤–ï¼Œå‡½æ•°ä½“å¯ä»¥åœ¨å…¶ä»–å‡½æ•°ä¸­å®šä¹‰å¹¶è°ƒç”¨ï¼Œ
	// æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼š
	//   a) å®šä¹‰çš„å‡½æ•°è¢«ç«‹å³è°ƒç”¨
	//   b) å‡½æ•°è¿”å›å€¼ç¬¦åˆè°ƒç”¨è€…å¯¹ç±»å‹çš„è¦æ±‚
	fmt.Println("ä¸¤æ•°ç›¸åŠ ä¹˜äºŒ: ",
		func(a, b int) int {
			return (a + b) * 2
		}(10, 2)) // Called with args 10 and 2
	// => Add + double two numbers: 24

	// å½“ä½ éœ€è¦ goto çš„æ—¶å€™ï¼Œä½ ä¼šçˆ±æ­»å®ƒçš„ï¼
	goto love
love:

	learnFunctionFactory() // è¿”å›å‡½æ•°çš„å‡½æ•°å¤šæ£’å•Š
	learnDefer()      // å¯¹ defer å…³é”®å­—çš„ç®€å•ä»‹ç»
	learnInterfaces() // å¥½ä¸œè¥¿æ¥äº†ï¼
}

func learnFunctionFactory() {
	// ç©ºè¡Œåˆ†å‰²çš„ä¸¤ä¸ªå†™æ³•æ˜¯ç›¸åŒçš„ï¼Œä¸è¿‡ç¬¬äºŒä¸ªå†™æ³•æ¯”è¾ƒå®ç”¨
	fmt.Println(sentenceFactory("åŸè°…")("å½“ç„¶é€‰æ‹©", "å¥¹ï¼"))

	d := sentenceFactory("åŸè°…")
	fmt.Println(d("å½“ç„¶é€‰æ‹©", "å¥¹ï¼"))
	fmt.Println(d("ä½ æ€ä¹ˆå¯ä»¥", "å¥¹ï¼Ÿ"))
}

// Decorator åœ¨ä¸€äº›è¯­è¨€ä¸­å¾ˆå¸¸è§ï¼Œåœ¨ go è¯­è¨€ä¸­ï¼Œ
// æ¥å—å‚æ•°ä½œä¸ºå…¶å®šä¹‰çš„ä¸€éƒ¨åˆ†çš„å‡½æ•°æ˜¯ä¿®é¥°ç¬¦çš„æ›¿ä»£å“
func sentenceFactory(mystring string) func(before, after string) string {
	return func(before, after string) string {
		return fmt.Sprintf("%s %s %s", before, mystring, after) // new string
	}
}

func learnDefer() (ok bool) {
	// defer è¡¨è¾¾å¼åœ¨å‡½æ•°è¿”å›çš„å‰ä¸€åˆ»æ‰§è¡Œ
	defer fmt.Println("defer è¡¨è¾¾å¼æ‰§è¡Œé¡ºåºä¸ºåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰")
	defer fmt.Println("\nè¿™å¥è¯æ¯”ä¸Šå¥è¯å…ˆè¾“å‡ºï¼Œå› ä¸º")
	// å…³äº defer çš„ç”¨æ³•ï¼Œä¾‹å¦‚ç”¨ defer å…³é—­ä¸€ä¸ªæ–‡ä»¶ï¼Œ
	// å°±å¯ä»¥è®©å…³é—­æ“ä½œä¸æ‰“å¼€æ“ä½œçš„ä»£ç æ›´è¿‘ä¸€äº›
	return true
}

// å®šä¹‰ Stringer ä¸ºä¸€ä¸ªæ¥å£ç±»å‹ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³• String
type Stringer interface {
	String() string
}

// å®šä¹‰ pair ä¸ºä¸€ä¸ªç»“æ„ä½“ï¼Œæœ‰ x å’Œ y ä¸¤ä¸ª int å‹å˜é‡ã€‚
type pair struct {
	x, y int
}

// å®šä¹‰ pair ç±»å‹çš„æ–¹æ³•ï¼Œå®ç° Stringer æ¥å£ã€‚
func (p pair) String() string { // p è¢«å«åšâ€œæ¥æ”¶å™¨â€
	// Sprintf æ˜¯ fmt åŒ…ä¸­çš„å¦ä¸€ä¸ªå…¬æœ‰å‡½æ•°ã€‚
	// ç”¨ . è°ƒç”¨ p ä¸­çš„å…ƒç´ ã€‚
	return fmt.Sprintf("(%d, %d)", p.x, p.y)
}

func learnInterfaces() {
	// èŠ±æ‹¬å·ç”¨æ¥å®šä¹‰ç»“æ„ä½“å˜é‡ï¼Œ:= åœ¨è¿™é‡Œå°†ä¸€ä¸ªç»“æ„ä½“å˜é‡èµ‹å€¼ç»™ pã€‚
	p := pair{3, 4}
	fmt.Println(p.String()) // è°ƒç”¨ pair ç±»å‹ p çš„ String æ–¹æ³•
	var i Stringer          // å£°æ˜ i ä¸º Stringer æ¥å£ç±»å‹
	i = p                   // æœ‰æ•ˆï¼å› ä¸º p å®ç°äº† Stringer æ¥å£ï¼ˆç±»ä¼¼ Java ä¸­çš„å¡‘å‹ï¼‰
	// è°ƒç”¨ i çš„ String æ–¹æ³•ï¼Œè¾“å‡ºå’Œä¸Šé¢ä¸€æ ·
	fmt.Println(i.String())

	// fmt åŒ…ä¸­çš„ Println å‡½æ•°å‘å¯¹è±¡è¦å®ƒä»¬çš„ string è¾“å‡ºï¼Œå®ç°äº† String æ–¹æ³•å°±å¯ä»¥è¿™æ ·ä½¿ç”¨äº†ã€‚
	// ï¼ˆç±»ä¼¼ Java ä¸­çš„åºåˆ—åŒ–ï¼‰
	fmt.Println(p) // è¾“å‡ºå’Œä¸Šé¢ä¸€æ ·ï¼Œè‡ªåŠ¨è°ƒç”¨ String å‡½æ•°ã€‚
	fmt.Println(i) // è¾“å‡ºå’Œä¸Šé¢ä¸€æ ·ã€‚

	learnVariadicParams("great", "learning", "here!")
}

// æœ‰å˜é•¿å‚æ•°åˆ—è¡¨çš„å‡½æ•°
func learnVariadicParams(myStrings ...interface{}) {
	// æšä¸¾å˜é•¿å‚æ•°åˆ—è¡¨çš„æ¯ä¸ªå‚æ•°å€¼
	// ä¸‹åˆ’çº¿åœ¨è¿™é‡Œç”¨æ¥æŠ›å¼ƒæšä¸¾æ—¶è¿”å›çš„æ•°ç»„ç´¢å¼•å€¼
	for _, param := range myStrings {
		fmt.Println("param:", param)
	}

	// å°†å¯å˜å‚æ•°åˆ—è¡¨ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°åˆ—è¡¨
	fmt.Println("params:", fmt.Sprintln(myStrings...))

	learnErrorHandling()
}

func learnErrorHandling() {
	// ", ok"ç”¨æ¥åˆ¤æ–­æœ‰æ²¡æœ‰æ­£å¸¸å·¥ä½œ
	m := map[int]string{3: "three", 4: "four"}
	if x, ok := m[1]; !ok { // ok ä¸º falseï¼Œå› ä¸º m ä¸­æ²¡æœ‰ 1
		fmt.Println("åˆ«æ‰¾äº†çœŸæ²¡æœ‰")
	} else {
		fmt.Print(x) // å¦‚æœ x åœ¨ map ä¸­çš„è¯ï¼Œx å°±æ˜¯é‚£ä¸ªå€¼å–½ã€‚
	}
	// é”™è¯¯å¯ä¸åªæ˜¯ okï¼Œå®ƒè¿˜å¯ä»¥ç»™å‡ºå…³äºé—®é¢˜çš„æ›´å¤šç»†èŠ‚ã€‚
	if _, err := strconv.Atoi("non-int"); err != nil { // _ discards value
		// è¾“å‡º "strconv.ParseInt: parsing "non-int": invalid syntax"
		fmt.Println(err)
	}
	// å¾…ä¼šå†è¯´æ¥å£å§ã€‚åŒæ—¶ï¼Œ
	learnConcurrency()
}

// c æ˜¯ channel ç±»å‹ï¼Œä¸€ä¸ªå¹¶å‘å®‰å…¨çš„é€šä¿¡å¯¹è±¡ã€‚
func inc(i int, c chan int) {
	c <- i + 1 // <- æŠŠå³è¾¹çš„å‘é€åˆ°å·¦è¾¹çš„ channelã€‚
}

// æˆ‘ä»¬å°†ç”¨incå‡½æ•°æ¥å¹¶å‘åœ°å¢åŠ ä¸€äº›æ•°å­—ã€‚
func learnConcurrency() {
	// ç”¨ make æ¥å£°æ˜ä¸€ä¸ª sliceï¼Œmake ä¼šåˆ†é…å’Œåˆå§‹åŒ– sliceï¼Œmap å’Œ channelã€‚
	c := make(chan int)
	// ç”¨ go å…³é”®å­—å¼€å§‹ä¸‰ä¸ªå¹¶å‘çš„ goroutineï¼Œå¦‚æœæœºå™¨æ”¯æŒçš„è¯ï¼Œè¿˜å¯èƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œã€‚
	// ä¸‰ä¸ªéƒ½è¢«å‘é€åˆ°åŒä¸€ä¸ª channelã€‚
	go inc(0, c) // go is a statement that starts a new goroutine.
	go inc(10, c)
	go inc(-805, c)
	// ä» channel ä¸­è¯»å–ç»“æœå¹¶æ‰“å°ã€‚
	// æ‰“å°å‡ºä»€ä¹ˆä¸œè¥¿æ˜¯ä¸å¯é¢„çŸ¥çš„ã€‚
	fmt.Println(<-c, <-c, <-c) // channel åœ¨å³è¾¹çš„æ—¶å€™ï¼Œ<-æ˜¯è¯»æ“ä½œã€‚

	cs := make(chan string)       // æ“ä½œ string çš„ channel
	cc := make(chan chan string)  // æ“ä½œ channel çš„ channel
	go func() { c <- 84 }()       // å¼€å§‹ä¸€ä¸ª goroutine æ¥å‘é€ä¸€ä¸ªæ–°çš„æ•°å­—
	go func() { cs <- "wordy" }() // å‘é€ç»™ cs
	// Select ç±»ä¼¼äº switchï¼Œä½†æ˜¯æ¯ä¸ª case åŒ…æ‹¬ä¸€ä¸ª channel æ“ä½œã€‚
	// å®ƒéšæœºé€‰æ‹©ä¸€ä¸ªå‡†å¤‡å¥½é€šè®¯çš„ caseã€‚
	select {
	case i := <-c: // ä» channel æ¥æ”¶çš„å€¼å¯ä»¥èµ‹ç»™å…¶ä»–å˜é‡
		fmt.Println("è¿™æ˜¯â€¦â€¦", i)
	case <-cs: // æˆ–è€…ç›´æ¥ä¸¢å¼ƒ
		fmt.Println("è¿™æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼")
	case <-cc: // ç©ºçš„ï¼Œè¿˜æ²¡ä½œå¥½é€šè®¯çš„å‡†å¤‡
		fmt.Println("åˆ«çæƒ³")
	}
	// ä¸Šé¢ c æˆ–è€… cs çš„å€¼è¢«å–åˆ°ï¼Œå…¶ä¸­ä¸€ä¸ª goroutine ç»“æŸï¼Œå¦å¤–ä¸€ä¸ªä¸€ç›´é˜»å¡ã€‚

	learnWebProgramming() // Go å¾ˆé€‚åˆ web ç¼–ç¨‹ï¼Œæˆ‘çŸ¥é“ä½ ä¹Ÿæƒ³å­¦ï¼
}

// http åŒ…ä¸­çš„ä¸€ä¸ªç®€å•çš„å‡½æ•°å°±å¯ä»¥å¼€å¯ web æœåŠ¡å™¨ã€‚
func learnWebProgramming() {
	// ListenAndServe ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†ç›‘å¬ç«¯å£ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç‰¹å®šæ˜¯ http.Handlerã€‚
	go func() {
		err := http.ListenAndServe(":8080", pair{})
		fmt.Println(err) // ä¸è¦æ— è§†é”™è¯¯ã€‚
	}()

	requestServer()
}

// ä½¿ pair å®ç° http.Handler æ¥å£çš„ ServeHTTP æ–¹æ³•ã€‚
func (p pair) ServeHTTP(w http.ResponseWriter, r *http.Request) {
	// ä½¿ç”¨ http.ResponseWriter è¿”å›æ•°æ®
	w.Write([]byte("Yåˆ†é’Ÿgolangé€Ÿæˆ!"))
}

func requestServer() {
	resp, err := http.Get("http://localhost:8080")
	fmt.Println(err)
	defer resp.Body.Close()
	body, err := ioutil.ReadAll(resp.Body)
	fmt.Printf("\næœåŠ¡å™¨æ¶ˆæ¯ï¼š `%s`", string(body))
}
